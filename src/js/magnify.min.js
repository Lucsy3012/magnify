$(document).ready(function(){var i=$("body"),o="magnified";function h(i){return 100/i.width()*i.height()}function t(){$(".magnify--js").each(function(){var i=$(this),t=h(i.find("img")),n=i.width()/100*t;i.css("height",n)})}function s(i,t,n){var a,o;n=void 0!==t.attr("data-space-around")?parseFloat(t.attr("data-space-around")):40,console.log(n);var s=$(window),f=s.width()-2*n,c=s.height()-2*n,d=h(t),e=c/d*100,r=f/100*d;100<d||c+2*n<r+2*n?(a=0-i.offset().top+s.scrollTop()+n,o=s.width()/2-e/2-i.offset().left,t.css({top:a,left:o,width:e})):(a=s.scrollTop()+s.height()/2-r/2-i.offset().top,o=0-i.offset().left+n,t.css({top:a,left:o,width:f}))}function f(){$(".magnify--js img").css({top:0,left:0,width:"100%"}),$(".magnify--js").removeClass(o)}t(),$(window).on("scroll",function(){t()}),$(window).on("resize",function(){t(),$(".magnify--js.magnified").each(function(){s($(this),$(this).find("img"),40)})}),i.find(".magnify--js").append('<div class="backdrop"></div>'),i.on("click",".magnify--js .backdrop",function(){f()}),i.on("click",".magnify--js img",function(i){!function(i){var t=i.parents(".magnify--js"),n=parseFloat(i.attr("data-space-around")),a=t.hasClass(o);f(),a?f():(t.addClass(o),s(t,i,n))}($(this))})});